<app-topbar></app-topbar>

<div class="flex flex-col pb-2 mx-auto">
  <div class="flex items-center justify-between mb-2">
    <span class="text-xl font-bold" i18n>Total sale by channel</span>

    <oms-date-filter
      (dateFilterChange)="dateFilterChanged($event)"
      (filter)="filterChanged($event)"
    >
    </oms-date-filter>
  </div>

  <div class="flex flex-col md:flex-row gap-2 mb-2">
    <div class="w-1/2 p-4 bg-white rounded-md flex flex-col justify-between">
      <span class="font-bold" i18n>Channel</span>

      <div class="h-full">
        <oms-chart
          type="line"
          [data]="saleOnChannelData"
          [options]="baseChartOption"
        ></oms-chart>
      </div>
    </div>

    <div class="w-full md:w-1/2">
      <sale-by-channel-heatmap
        [data]="saleByChannelHeatmapData"
      ></sale-by-channel-heatmap>
    </div>
  </div>

  <oms-table (pagingInfo)="pagingInfo($event)" [table]="tableData">
    <tr *ngFor="let item of tableData.data.body" class="group">
      <td>
        <div class="flex gap-2 items-center">
          <div class="w-10 h-10">
            <img
              class="object-cover"
              [src]="item.channelImage"
              [alt]="item.channelImage"
            />
          </div>

          <span>{{ item.channelName }}</span>
        </div>
      </td>

      <td class="!text-right">
        <span *ngIf="item.isActive; else inActive">
          <i class="pi pi-circle-fill text-success"></i>

          <span i18n>Active</span>
        </span>

        <ng-template #inActive>
          <i class="pi pi-circle-fill text-danger"></i>

          <span i18n>Inactive</span>
        </ng-template>
      </td>

      <td class="!text-right">{{ item.numberOfOrders | number }}</td>

      <td class="!text-center">{{ item.totalSales | number }}</td>
    </tr></oms-table
  >
</div>
